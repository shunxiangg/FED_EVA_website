<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details</title>
    <link rel="stylesheet" href="css_folder/cart.css">
    <link rel="stylesheet" href="css_folder/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>

    <header>
        <nav class="navbar">
            <div class="logo">
                <a href="home.html">
                    EVA
                </a>
            </div>
            <ul class="menu">
                <!-- Add after userDisplay span in navbar -->
                <li><span id="userDisplay"></span></li>
                <li><button id="logoutBtn" onclick="logout()" style="display: none;">Logout</button></li>
                <li><a href="home.html" class="nav-link">Home</a></li>
                <li><a href="browse.html" class="nav-link_active">Browse</a></li>
                <li><a href="sell.html" class="nav-link">Sell</a></li>
                <!-- <li><a class="fas fa-shopping-cart" href="javascript:void(0)" onclick="openCart()" class="nav-link"></a></li> -->
                <li><a class="fas fa-user" href="profile.html" class="nav-link"></a></li>
            </ul>
            <div class="hamburger" onclick="toggleMenu()">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>

    <!-- Back Button -->
    <button class="back-button" onclick="window.location.href='browse.html'">
        <svg xmlns="http://www.w3.org/2000/svg" height="40" width="40" viewBox="0 0 24 24">
            <path d="M14 7l-5 5 5 5V7z" />
        </svg>
    </button>

    <main class="product-details-container">
        <div id="product-details">Loading...</div>
    </main>
    <!-- cart button conner right -->
    <button id="cart-toggle" class="cart-toggle" onclick="window.location.href='cart.html'">
        <i class="fas fa-shopping-cart"></i>
        <span id="cartCount" class="cart-count">0</span>
    </button>

    <footer>
        <div id="language-selector">
            <select id="language-dropdown" onchange="changeLanguage()">
                <option value="en">English</option>
                <option value="zh">Chinese</option>
                <option value="ms">Malay</option>
                <option value="hi">Hindi</option>
            </select>
        </div>

        <div class="footer-content">
            <p>&copy; 2025 MokeSell. All rights reserved.</p>
            <div class="footer-links">
                <a href="/about">About Us</a> |
                <a href="/privacy-policy">Privacy Policy</a> |
                <a href="/terms-of-service">Terms of Service</a>
            </div>
            <div class="social-media">
                <a class="fab fa-instagram" href="https://www.instagram.com/" target="_blank"> Instagram</a> |
                <a class="fab fa-facebook" href="https://facebook.com" target="_blank"> Facebook</a> |
                <a class="fab fa-twitter" href="https://twitter.com" target="_blank"> Twitter</a> |
                <a class="fab fa-linkedin" href="https://linkedin.com" target="_blank"> LinkedIn</a>
            </div>
        </div>
    </footer>

    <script src="js_folder/cart.js"></script>
    <script>
        const APIKEY = "6787a92c77327a0a035a5437";
        const DATABASE_URL = "https://evadatabase-f3b8.restdb.io/rest/sell";

        async function getProductDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');

            if (!productId) {
                document.getElementById('product-details').innerHTML = 'Product not found';
                return;
            }

            try {
                const response = await fetch(`${DATABASE_URL}/${productId}`, {
                    headers: {
                        "Content-Type": "application/json",
                        "x-apikey": APIKEY
                    }
                });
                const product = await response.json();
                displayProductDetails(product);
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('product-details').innerHTML = 'Error loading product';
            }
        }

        function displayProductDetails(product) {
            const detailsHtml = `
            <div class="product-details-grid">
                <div class="product-image-large">
                    ${product.imageData ?
                    `<img src="${product.imageData}" alt="${product.itemName}">` :
                    '<div class="no-image">No Image Available</div>'
                }
                </div>
                <div class="product-info">
                    <h1>${product.itemName}</h1>
                    <p class="price">$${product.price}</p>
                    <p class="description">${product.description}</p>
                    <div class="specs">
                        <p><strong>Category:</strong> ${product.category}</p>
                        <p><strong>Condition:</strong> ${product.condition}</p>
                        <p><strong>Seller:</strong> ${product.sellerName}</p>
                    </div>
                    <button onclick="addToCart('${product._id}')" class="add-to-cart-btn">
                        Add to Cart
                    </button>
                </div>
            </div>
        `;
            document.getElementById('product-details').innerHTML = detailsHtml;
        }

        document.addEventListener('DOMContentLoaded', getProductDetails);
    </script>

    <style>
        .product-details-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .product-details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .product-image-large img {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }

        .product-info {
            padding: 1rem;
        }

        .price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2563eb;
            margin: 1rem 0;
        }

        .specs {
            margin: 1.5rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        @media (max-width: 768px) {
            .product-details-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>

</html>